{% extends "base.html" %}

{% block title %}{{ translated.name if translated else service_option.name }}{% endblock %}

{% block content %}
<section class="service-detail-page py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <!-- Service Header -->
                <div class="service-header stg_card_sub_format text-center mb-5">
                    <h1 class="stg_page_title mb-3">{{ translated.name if translated else service_option.name }}</h1>
                    <p class="service-subtitle">{{ translated.detailed_description or translated.description if translated else (service_option.detailed_description or service_option.description) }}</p>
                </div>
                
                <!-- 패키지 화보 갤러리 (Carousel) -->
                {% if photos_by_category %}
                <div class="package-photo-gallery mb-5">
                    {% for category, photos in photos_by_category.items() %}
                    <div class="package-photo-category mb-4">
                        <h3 class="category-title stg_card_title">
                            <i class="bi bi-camera me-2"></i>{{ category }}
                        </h3>
                        <div class="row g-4">
                            {% for photo in photos %}
                            <div class="col-md-6 col-lg-4">
                                <div class="package-photo-card">
                                    <h4 class="concept-title">{{ photo.concept }}</h4>
                                    {% if photo.images %}
                                    <div id="packagePhotoCarousel{{ photo.id }}" class="carousel slide package-carousel" data-bs-ride="carousel">
                                        <div class="carousel-inner">
                                            {% for image_id in photo.images %}
                                            <div class="carousel-item {% if loop.first %}active{% endif %}">
                                                <img src="{{ url_for('main.serve_package_photo_image', image_id=image_id) }}" 
                                                     class="d-block w-100 package-carousel-img" 
                                                     alt="{{ photo.concept }} - {{ loop.index }}"
                                                     loading="lazy">
                                            </div>
                                            {% endfor %}
                                        </div>
                                        {% if photo.images|length > 1 %}
                                        <button class="carousel-control-prev" type="button" 
                                                data-bs-target="#packagePhotoCarousel{{ photo.id }}" data-bs-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="visually-hidden">Previous</span>
                                        </button>
                                        <button class="carousel-control-next" type="button" 
                                                data-bs-target="#packagePhotoCarousel{{ photo.id }}" data-bs-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="visually-hidden">Next</span>
                                        </button>
                                        <div class="carousel-indicators package-carousel-indicators">
                                            {% for image_id in photo.images %}
                                            <button type="button" 
                                                    data-bs-target="#packagePhotoCarousel{{ photo.id }}" 
                                                    data-bs-slide-to="{{ loop.index0 }}" 
                                                    {% if loop.first %}class="active" aria-current="true"{% endif %}
                                                    aria-label="Slide {{ loop.index }}"></button>
                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="photo-count">
                                        <i class="bi bi-images me-1"></i>{{ photo.images|length }}{{ _('장') }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                
                <!-- 상세 내용 - 원본이 비어있으면 표시하지 않음 -->
                {% if service_option.details and service_option.details.strip() and details %}
                <div class="mb-5">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-list-check me-2"></i>{{ _('상세 내용') }}</h2>
                        <ul class="feature-list">
                            {% for detail in details %}
                            <li class="feature-item">
                                <i class="bi bi-check-circle-fill"></i>
                                <span class="stg_body_text">{{ detail }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% endif %}
                
                <!-- 패키지 및 가격 정보 (다중 테이블 지원) - 원본이 비어있으면 표시하지 않음 -->
                {% if service_option.packages and service_option.packages.strip() and packages %}
                <div class="mb-5">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-tag me-2"></i>{{ _('패키지 및 가격') }}</h2>
                        
                        {% if packages.tables is defined %}
                            {# 새로운 다중 테이블 형식 #}
                            {% for table in packages.tables %}
                                {% if table.packages and table.packages|length > 0 %}
                                <div class="package-table-section{% if not loop.first %} mt-4{% endif %}">
                                    {% if table.title %}
                                    <h3 class="package-table-title">{{ table.title }}</h3>
                                    {% endif %}
                                    {# Desktop: 테이블 형식 #}
                                    <div class="package-table-container package-desktop-view">
                                        <table class="stg_table">
                                            <thead>
                                                <tr>
                                                    <th>{{ _('패키지명') }}</th>
                                                    <th>{{ _('서비스 내용') }}</th>
                                                    <th>{{ _('소요시간') }}</th>
                                                    <th>{{ _('가격') }}</th>
                                                    <th>{{ _('비고') }}</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for package in table.packages %}
                                                <tr>
                                                    <td class="stg_table_name">{{ package.name }}</td>
                                                    <td class="stg_table_desc">{{ package.description }}</td>
                                                    <td class="stg_table_duration">{{ package.duration }}</td>
                                                    <td class="stg_table_price">{% if current_lang == 'ko' %}{{ package.price|replace(' KRW', '원')|replace('KRW', '원') }}{% else %}{{ package.price }}{% endif %}</td>
                                                    <td class="stg_table_notes">{{ package.notes if package.notes else '' }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                    {# Mobile: 카드 형식 #}
                                    <div class="package-mobile-view">
                                        {% for package in table.packages %}
                                        <div class="package-mobile-card">
                                            <h4 class="package-mobile-card-title">{{ package.name }}</h4>
                                            <ul class="package-mobile-card-list">
                                                <li>{{ package.description }}</li>
                                                <li>{{ package.duration }} {{ _('소요') }}</li>
                                                <li>{% if current_lang == 'ko' %}{{ package.price|replace(' KRW', '원')|replace('KRW', '원') }}{% else %}{{ package.price }}{% endif %}</li>
                                                {% if package.notes and package.notes.strip() %}
                                                <li>{{ package.notes }}</li>
                                                {% endif %}
                                            </ul>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            {# 기존 단일 배열 형식 (하위 호환성) #}
                            {# Desktop: 테이블 형식 #}
                            <div class="package-table-container package-desktop-view">
                                <table class="stg_table">
                                    <thead>
                                        <tr>
                                            <th>{{ _('패키지명') }}</th>
                                            <th>{{ _('서비스 내용') }}</th>
                                            <th>{{ _('소요시간') }}</th>
                                            <th>{{ _('가격') }}</th>
                                            <th>{{ _('비고') }}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for package in packages %}
                                        <tr>
                                            <td class="stg_table_name">{{ package.name }}</td>
                                            <td class="stg_table_desc">{{ package.description }}</td>
                                            <td class="stg_table_duration">{{ package.duration }}</td>
                                            <td class="stg_table_price">{% if current_lang == 'ko' %}{{ package.price|replace(' KRW', '원')|replace('KRW', '원') }}{% else %}{{ package.price }}{% endif %}</td>
                                            <td class="stg_table_notes">{{ package.notes if package.notes else '' }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {# Mobile: 카드 형식 #}
                            <div class="package-mobile-view">
                                {% for package in packages %}
                                <div class="package-mobile-card">
                                    <h4 class="package-mobile-card-title">{{ package.name }}</h4>
                                    <ul class="package-mobile-card-list">
                                        <li>{{ package.description }}</li>
                                        <li>{{ package.duration }} {{ _('소요') }}</li>
                                        <li>{% if current_lang == 'ko' %}{{ package.price|replace(' KRW', '원')|replace('KRW', '원') }}{% else %}{{ package.price }}{% endif %}</li>
                                        {% if package.notes and package.notes.strip() %}
                                        <li>{{ package.notes }}</li>
                                        {% endif %}
                                    </ul>
                                </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                
                <!-- 예약 방법 카드 - 원본이 비어있으면 표시하지 않음 -->
                {% if service_option.booking_method and service_option.booking_method.strip() %}
                {% set booking_method_text = translated.booking_method if translated and translated.booking_method else service_option.booking_method %}
                <div class="mb-4">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-calendar-check me-2"></i>{{ _('예약 방법') }}</h2>
                        
                        <div class="booking-content">
                            {% set booking_lines = booking_method_text.split('\n') %}
                            {% set ns = namespace(in_example=false, in_account=false, has_normal=false) %}
                            
                            {% for line in booking_lines %}
                                {% if line.strip() %}
                                    {% set trimmed = line.strip()|replace('\u200b', '')|replace('\u200c', '')|replace('\u200d', '')|replace('\ufeff', '') %}
                                    {% set is_example = trimmed.startswith('예)') or trimmed.startswith('예 )') or trimmed.startswith('Example)') or trimmed.startswith('Example )') or trimmed.startswith('Ex)') or trimmed.startswith('例）') or trimmed.startswith('例)') or trimmed.startswith('例：') or trimmed.startswith('例如）') or trimmed.startswith('例如)') %}
                                    {% set is_account = trimmed.startswith('입금 계좌') or trimmed.startswith('입금계좌') or trimmed.startswith('Deposit Account') or trimmed.startswith('Bank Account') or trimmed.startswith('振込口座') or trimmed.startswith('入金口座') or trimmed.startswith('汇款账户') or trimmed.startswith('存款账户') %}
                                    {% set is_card_note = '*카드 결제' in trimmed or '*카드결제' in trimmed or '*Card payment' in trimmed or '*card payment' in trimmed or '*カード決済' in trimmed or '*クレジットカード' in trimmed or '*刷卡' in trimmed or '*信用卡' in trimmed %}
                                    
                                    {# 예시 라인 처리 #}
                                    {% if is_example %}
                                        {% if ns.has_normal and not ns.in_example %}
                                            </ul>
                                            {% set ns.has_normal = false %}
                                        {% endif %}
                                        {% if not ns.in_example %}
                                            <div class="example-info">
                                            {% set ns.in_example = true %}
                                        {% endif %}
                                        <p class="example-line stg_body_text">{{ trimmed }}</p>
                                    
                                    {# 입금계좌 라인 처리 #}
                                    {% elif is_account or is_card_note %}
                                        {% if ns.has_normal %}
                                            </ul>
                                            {% set ns.has_normal = false %}
                                        {% endif %}
                                        {% if ns.in_example %}
                                            </div>
                                            {% set ns.in_example = false %}
                                        {% endif %}
                                        {% if not ns.in_account %}
                                            <div class="account-info">
                                            {% set ns.in_account = true %}
                                        {% endif %}
                                        {% if is_card_note %}
                                            <span class="note-text stg_body_text">{{ trimmed }}</span>
                                        {% else %}
                                            <strong class="stg_body_text">{{ trimmed }}</strong><br>
                                        {% endif %}
                                    
                                    {# 일반 라인 처리 #}
                                    {% else %}
                                        {% if ns.in_example %}
                                            </div>
                                            {% set ns.in_example = false %}
                                        {% endif %}
                                        {% if ns.in_account %}
                                            </div>
                                            {% set ns.in_account = false %}
                                        {% endif %}
                                        {% if not ns.has_normal %}
                                            <ul class="booking-list">
                                            {% set ns.has_normal = true %}
                                        {% endif %}
                                        <li class="stg_body_text">{{ trimmed }}</li>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                            
                            {# 마지막 열린 태그 닫기 #}
                            {% if ns.has_normal %}</ul>{% endif %}
                            {% if ns.in_example %}</div>{% endif %}
                            {% if ns.in_account %}</div>{% endif %}
                            
                            <div class="text-center mt-4">
                                <a href="https://pf.kakao.com/_xgDcFK" target="_blank" class="stg_button">
                                    <span class="stg_button_text">{{ _('문의/예약 신청') }}</span>
                                    <i class="bi bi-arrow-right stg_button_arrow"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- 제작비 결제 방식 카드 - 원본이 비어있으면 표시하지 않음 -->
                {% if service_option.payment_info and service_option.payment_info.strip() %}
                {% set payment_info_text = translated.payment_info if translated and translated.payment_info else service_option.payment_info %}
                <div class="mb-4">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-credit-card me-2"></i>{{ _('결제 방식') }}</h2>
                        <div class="booking-content">
                            <ul class="booking-list">
                                {% for line in payment_info_text.split('\n') %}
                                {% if line.strip() %}
                                <li class="stg_body_text">{{ line.strip() }}</li>
                                {% endif %}
                                {% endfor %}
                            </ul>
                            <div class="account-info">
                                <strong class="stg_body_text">{{ _('입금 계좌') }} : 국민 46480101210393 이지은 ((신)스타일그래퍼)</strong><br>
                                <span class="note-text stg_body_text">{{ _('*카드 결제는 스타일그래퍼 샵으로 직접 방문하시면 가능합니다.') }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- 안내 사항 카드 - 원본이 비어있으면 표시하지 않음 -->
                {% if service_option.guide_info and service_option.guide_info.strip() %}
                {% set guide_info_text = translated.guide_info if translated and translated.guide_info else service_option.guide_info %}
                <div class="mb-4">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-info-circle me-2"></i>{{ _('안내 사항') }}</h2>
                        <div class="booking-content">
                            <ul class="booking-list">
                                {% for line in guide_info_text.split('\n') %}
                                {% if line.strip() %}
                                <li class="stg_body_text">{{ line.strip() }}</li>
                                {% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- 예약 변경 및 환불 규정 카드 - 원본이 비어있으면 표시하지 않음 -->
                {% set has_refund_text_original = service_option.refund_policy_text and service_option.refund_policy_text.strip() %}
                {% set has_refund_table_original = service_option.refund_policy_table and service_option.refund_policy_table.strip() %}
                {% if has_refund_text_original or has_refund_table_original %}
                {% set refund_policy_text_val = translated.refund_policy_text if translated and translated.refund_policy_text else service_option.refund_policy_text %}
                {% set refund_policy_table_val = translated.refund_policy_table if translated and translated.refund_policy_table else service_option.refund_policy_table %}
                <div class="mb-4">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-arrow-repeat me-2"></i>{{ _('예약 변경 및 환불 규정') }}</h2>
                        <div class="booking-content">
                            {% if refund_policy_text_val and refund_policy_text_val.strip() %}
                            <ul class="booking-list">
                                {% for line in refund_policy_text_val.split('\n') %}
                                {% if line.strip() %}
                                <li class="stg_body_text">{{ line.strip() }}</li>
                                {% endif %}
                                {% endfor %}
                            </ul>
                            {% endif %}
                            
                            {% if refund_policy_table_val and refund_policy_table_val.strip() %}
                                {% set refund_rules = refund_policy_table_val.split('\n') %}
                                {% if refund_rules %}
                                <h4 class="refund-subtitle">{{ _('환불 기준표') }}</h4>
                            <div class="refund-table-container">
                                <table class="stg_table">
                                    <thead>
                                        <tr>
                                            <th>{{ _('기준일') }}</th>
                                            <th>{{ _('환불비율') }}</th>
                                            <th>{{ _('비고') }}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for rule in refund_rules %}
                                        {% if rule.strip() and '|' in rule %}
                                        {% set parts = rule.split('|') %}
                                        <tr>
                                            <td class="stg_table_name">{{ parts[0].strip() }}</td>
                                            <td>{{ parts[1].strip() }}</td>
                                            <td class="stg_table_notes">{{ parts[2].strip() if parts|length > 2 else '' }}</td>
                                        </tr>
                                        {% endif %}
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- 시간외 업차지 카드 - 원본이 비어있으면 표시하지 않음 -->
                {% if service_option.overtime_charge_table and service_option.overtime_charge_table.strip() %}
                {% set overtime_table_val = translated.overtime_charge_table if translated and translated.overtime_charge_table else service_option.overtime_charge_table %}
                <div class="mb-4">
                    <div class="stg_card_format service-info-card">
                        <h2 class="section-title"><i class="bi bi-clock-history me-2"></i>{{ _('시간외 업차지') }}</h2>
                        <div class="booking-content">
                            <div class="overtime-charge-table-container">
                                {% set overtime_charge_rules = overtime_table_val.split('\n') %}
                                {% if overtime_charge_rules %}
                                <table class="stg_table">
                                    <thead>
                                        <tr>
                                            <th>{{ _('시간대/조건') }}</th>
                                            <th>{{ _('추가 요금') }}</th>
                                            <th>{{ _('비고') }}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for rule in overtime_charge_rules %}
                                        {% if rule.strip() and '|' in rule %}
                                        {% set parts = rule.split('|') %}
                                        <tr>
                                            <td class="stg_table_name">{{ parts[0].strip() }}</td>
                                            <td class="stg_table_price">{% if current_lang == 'ko' %}{{ parts[1].strip()|replace(' KRW', '원')|replace('KRW', '원') }}{% else %}{{ parts[1].strip() }}{% endif %}</td>
                                            <td class="stg_table_notes">{{ parts[2].strip() if parts|length > 2 else '' }}</td>
                                        </tr>
                                        {% endif %}
                                        {% endfor %}
                                    </tbody>
                                </table>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- Contact Section -->
                <div class="stg_kakao_format mt-5">
                    <div class="stg_kakao_content">
                        <p class="stg_body_text stg_kakao_text mb-4">{{ _('궁금하신 점이나 예약신청은 아래 버튼을 클릭해주세요') }}</p>
                        <a href="https://pf.kakao.com/_xgDcFK" target="_blank" class="stg_button">
                            <span class="stg_button_text">{{ _('문의/예약 신청') }}</span>
                            <i class="bi bi-arrow-right stg_button_arrow"></i>
                        </a>
                    </div>
                    <div class="stg_kakao_glow"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.service-detail-page {
    min-height: 100vh;
}

/* 패키지 화보 갤러리 */
.package-photo-gallery {
    margin-top: 2rem;
}

.package-photo-category {
    margin-bottom: 2rem;
}

.category-title.stg_card_title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.5rem !important;
    color: rgb(139, 92, 246) !important;
    font-weight: 500;
    margin-bottom: 1.5rem;
    padding: 0.75rem 1rem !important;
    background: #ffffff !important;
    border-radius: 8px;
    border: 1px solid rgba(139, 92, 246, 0.2) !important;
    display: flex;
    align-items: center;
}

.category-title.stg_card_title i {
    color: rgb(139, 92, 246) !important;
}

.package-photo-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(139, 95, 191, 0.1);
    border: 1px solid rgba(181, 126, 220, 0.2);
    transition: all 0.3s ease;
}

.package-photo-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(139, 95, 191, 0.2);
    border-color: rgba(181, 126, 220, 0.4);
}

.concept-title {
    font-family: 'Nanum Gothic', sans-serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: #44237A;
    padding: 1rem 1rem 0.5rem 1rem;
    margin: 0;
    text-align: center;
}

.package-carousel {
    position: relative;
}

.package-carousel-img {
    height: 300px;
    object-fit: cover;
    border-radius: 0;
}

.package-carousel .carousel-control-prev,
.package-carousel .carousel-control-next {
    width: 40px;
    height: 40px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.3s ease;
    background: rgba(139, 95, 191, 0.7);
    border-radius: 50%;
}

.package-carousel:hover .carousel-control-prev,
.package-carousel:hover .carousel-control-next {
    opacity: 1;
}

.package-carousel .carousel-control-prev {
    left: 10px;
}

.package-carousel .carousel-control-next {
    right: 10px;
}

.package-carousel .carousel-control-prev-icon,
.package-carousel .carousel-control-next-icon {
    width: 1rem;
    height: 1rem;
}

.package-carousel-indicators {
    position: relative;
    bottom: auto;
    margin: 0.75rem 0;
    justify-content: center;
}

.package-carousel-indicators button {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: rgba(181, 126, 220, 0.4);
    margin: 0 4px;
    border: none;
    transition: all 0.3s ease;
}

.package-carousel-indicators button.active {
    background-color: #8B5CF6;
    transform: scale(1.2);
}

.photo-count {
    font-size: 0.85rem;
    color: #6c757d;
    text-align: center;
    padding: 0.5rem;
    border-top: 1px solid rgba(181, 126, 220, 0.1);
}

/* Dark Mode - Package Photo Gallery */
body:not(.light-mode) .category-title.stg_card_title {
    color: rgb(139, 92, 246) !important;
    background: #ffffff !important;
    border-color: rgba(139, 92, 246, 0.3) !important;
}

body:not(.light-mode) .category-title.stg_card_title i {
    color: rgb(139, 92, 246) !important;
}

body:not(.light-mode) .package-photo-card {
    background: rgba(30, 20, 40, 0.9);
    border-color: rgba(181, 126, 220, 0.3);
}

body:not(.light-mode) .package-photo-card:hover {
    border-color: rgba(181, 126, 220, 0.6);
    box-shadow: 0 8px 30px rgba(181, 126, 220, 0.3);
}

body:not(.light-mode) .concept-title {
    color: #C8AAFF;
}

body:not(.light-mode) .photo-count {
    color: rgba(255, 255, 255, 0.6);
    border-top-color: rgba(181, 126, 220, 0.2);
}

/* Responsive - Package Photo Gallery */
@media (max-width: 768px) {
    .package-carousel-img {
        height: 250px;
    }
    
    .category-title.stg_card_title {
        font-size: 1.3rem !important;
    }
    
    .concept-title {
        font-size: 1rem;
    }
    
    .package-carousel .carousel-control-prev,
    .package-carousel .carousel-control-next {
        opacity: 0.8;
        width: 35px;
        height: 35px;
    }
}

/* Service Header */
.service-header {
    background: #ffffff;
    padding: 4rem 2rem;
    /* border, border-radius, box-shadow는 stg_card_sub_format 클래스에서 상속 */
}

.service-title {
    font-family: 'Nanum Gothic', sans-serif;
    font-size: 2.5rem;
    color: rgba(139, 95, 191, 0.8);
    font-weight: 600;
    letter-spacing: 0.02em;
}

.service-subtitle {
    font-size: 1.2rem;
    color: #6c757d;
    line-height: 1.8;
    margin: 0;
    white-space: pre-line;
}

/* Service Info Card - stg_card_format 확장 (좌측 정렬 컨텐츠용) */
.service-info-card {
    text-align: left !important;
    padding: 2rem !important;
    display: block !important;
}

.service-info-card:hover {
    transform: translateY(-3px);
}

/* Light Mode 스타일 */
body.light-mode .service-info-card {
    text-align: left !important;
}

.section-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.6rem;
    color: #44237A;
    font-weight: 400;
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid rgba(181, 126, 220, 0.2);
    position: relative;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 60px;
    height: 2px;
    background: linear-gradient(90deg, var(--neon-lavender), transparent);
    box-shadow: 0 0 10px rgba(181, 126, 220, 0.5);
}

/* Feature List */
.feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.feature-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 1rem;
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.7;
}

.feature-item i {
    color: var(--neon-lavender);
    margin-right: 0.75rem;
    margin-top: 0.2rem;
    flex-shrink: 0;
    filter: drop-shadow(0 0 5px rgba(181, 126, 220, 0.5));
}

/* Package Table Section */
.package-table-section {
    border-top: 1px solid rgba(181, 126, 220, 0.15);
    padding-top: 1.5rem;
}

.package-table-section:first-child {
    border-top: none;
    padding-top: 0;
}

.package-table-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.3rem;
    color: #44237A !important;
    font-weight: 500;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px dashed rgba(181, 126, 220, 0.3);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.package-table-title::before {
    content: '▸';
    color: #44237A;
}

.package-table-container {
    overflow-x: auto;
}

/* Booking Content */
.booking-content {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.8;
}

.booking-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.booking-list li {
    position: relative;
    padding-left: 1.5rem;
    margin-bottom: 0.5rem;
    line-height: 1.5;
}

.booking-list li::before {
    content: "•";
    color: #8B5CF6;
    font-weight: bold;
    position: absolute;
    left: 0;
    top: 0;
}

/* Light Mode bullet color */
body.light-mode .booking-list li::before {
    color: #8B5CF6;
}

/* Dark Mode bullet color */
body:not(.light-mode) .booking-list li::before {
    color: #C8AAFF;
    text-shadow: 0 0 10px rgba(181, 126, 220, 0.5);
}

/* booking-list 내 stg_body_text 마진/패딩 조정 */
.booking-list li.stg_body_text {
    margin: 0 0 0.5rem 0 !important;
    padding: 0 0 0 1.5rem !important;
    line-height: 1.5 !important;
}

.guide-paragraph {
    margin-bottom: 1rem;
    color: rgba(255, 255, 255, 0.75);
}

.note-text {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.5);
    font-style: italic;
}

/* Light Mode - Note Text */
body.light-mode .note-text {
    color: rgba(90, 70, 110, 0.7);
}

.account-info {
    background: rgba(181, 126, 220, 0.1);
    border-left: 3px solid var(--neon-lavender);
    padding: 1rem 1.5rem;
    margin-top: 0.75rem;
    border-radius: 0 12px 12px 0;
    box-shadow: 0 0 20px rgba(181, 126, 220, 0.1);
}

.account-info strong {
    color: var(--neon-lavender);
}

/* Example Info Box (예) 부분) */
.example-info {
    background: rgba(181, 126, 220, 0.08);
    border-left: 3px solid rgba(181, 126, 220, 0.6);
    padding: 1rem 1.5rem;
    margin-top: 0.75rem;
    border-radius: 0 12px 12px 0;
    box-shadow: 0 0 15px rgba(181, 126, 220, 0.08);
}

.example-line {
    color: rgba(255, 255, 255, 0.75);
    margin-bottom: 0.5rem;
    line-height: 1.7;
}

.example-line:last-child {
    margin-bottom: 0;
}

/* Light Mode - Example Info */
body.light-mode .example-info {
    background: rgba(139, 92, 246, 0.08);
    border-left-color: rgba(139, 92, 246, 0.6);
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.08);
}

body.light-mode .example-line {
    color: var(--stg-body-color-light);
}

/* Light Mode - Account Info */
body.light-mode .account-info {
    background: rgba(139, 92, 246, 0.1);
    border-left-color: rgba(139, 92, 246, 0.7);
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.1);
}

body.light-mode .account-info strong {
    color: #6B4D8A;
}

/* Refund & Overtime Table Containers */
.refund-table-container,
.overtime-charge-table-container {
    margin-top: 1.5rem;
}

.refund-subtitle {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.2rem;
    color: #44237A !important;
    font-weight: 400;
    margin: 1.5rem 0 1rem 0;
}

body.light-mode .refund-subtitle {
    color: #44237A !important;
}

/* International Customer Notice */
.international-notice {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(181, 126, 220, 0.2) 100%);
    border: 2px solid rgba(139, 92, 246, 0.4);
    border-radius: 16px;
    padding: 1.25rem 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15), 
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
    animation: noticeGlow 2s ease-in-out infinite alternate;
}

@keyframes noticeGlow {
    0% {
        box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15), 
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    100% {
        box-shadow: 0 4px 30px rgba(139, 92, 246, 0.25), 
                    inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }
}

.international-notice-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
}

.international-notice-icon i {
    font-size: 1.5rem;
    color: #ffffff;
}

.international-notice-content {
    flex: 1;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
}

.international-notice-text {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: #ffffff;
    flex: 1;
    min-width: 200px;
}

.international-contact-btn {
    display: inline-flex;
    align-items: center;
    background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
    color: #ffffff;
    padding: 0.6rem 1.25rem;
    border-radius: 25px;
    font-weight: 600;
    font-size: 0.95rem;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    white-space: nowrap;
}

.international-contact-btn:hover {
    background: linear-gradient(135deg, #7C3AED 0%, #9333EA 100%);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
}

/* Light Mode - International Notice */
body.light-mode .international-notice {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.15) 100%);
    border-color: rgba(139, 92, 246, 0.35);
    box-shadow: 0 4px 20px rgba(139, 92, 246, 0.1);
}

body.light-mode .international-notice-text {
    color: #44237A;
}

/* Package Mobile/Desktop View Toggle */
.package-mobile-view {
    display: none;
}

.package-desktop-view {
    display: block;
}

/* Package Mobile Card Styles */
.package-mobile-card {
    background: rgba(181, 126, 220, 0.08);
    border: 1px solid rgba(181, 126, 220, 0.2);
    border-radius: 12px;
    padding: 1rem 1.25rem;
    margin-bottom: 0.75rem;
    transition: all 0.3s ease;
    cursor: pointer;
}

.package-mobile-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(181, 126, 220, 0.2);
    border-color: rgba(181, 126, 220, 0.4);
    background: rgba(181, 126, 220, 0.12);
}

.package-mobile-card:last-child {
    margin-bottom: 0;
}

.package-mobile-card-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: calc(var(--stg-body-font-size) * 0.9);
    font-weight: 600;
    color: #44237A;
    margin: 0 0 0.5rem 0;
    padding-bottom: 0.4rem;
    border-bottom: 1px dashed rgba(181, 126, 220, 0.3);
}

.package-mobile-card-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.package-mobile-card-list li {
    position: relative;
    padding-left: 1rem;
    margin-bottom: 0.25rem;
    font-family: var(--stg-body-font-family);
    font-size: calc(var(--stg-body-font-size) * 0.9);
    line-height: 1.5;
    color: var(--stg-body-color-light);
}

.package-mobile-card-list li:last-child {
    margin-bottom: 0;
}

.package-mobile-card-list li::before {
    content: "•";
    color: #8B5CF6;
    font-weight: bold;
    position: absolute;
    left: 0;
    top: 0;
}

/* Dark Mode - Package Mobile Card */
body:not(.light-mode) .package-mobile-card {
    background: rgba(181, 126, 220, 0.1);
    border-color: rgba(181, 126, 220, 0.25);
}

body:not(.light-mode) .package-mobile-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(181, 126, 220, 0.3);
    border-color: rgba(181, 126, 220, 0.5);
    background: rgba(181, 126, 220, 0.18);
}

body:not(.light-mode) .package-mobile-card-title {
    color: var(--neon-lavender);
}

body:not(.light-mode) .package-mobile-card-list li {
    color: rgba(255, 255, 255, 0.8);
}

body:not(.light-mode) .package-mobile-card-list li::before {
    color: #C8AAFF;
    text-shadow: 0 0 10px rgba(181, 126, 220, 0.5);
}

/* Responsive */
@media (max-width: 768px) {
    .service-header {
        padding: 3rem 1.5rem;
    }
    
    .service-title {
        font-size: 2rem;
    }
    
    .service-info-card {
        padding: 1.5rem !important;
    }
    
    .section-title {
        font-size: 1.4rem;
    }
    
    /* Package Mobile View Toggle */
    .package-mobile-view {
        display: block;
    }
    
    .package-desktop-view {
        display: none;
    }
    
    /* International Notice Mobile */
    .international-notice {
        flex-direction: column;
        text-align: center;
        padding: 1.25rem;
        gap: 0.75rem;
    }
    
    .international-notice-content {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .international-notice-text {
        text-align: center;
        min-width: auto;
    }
}
</style>
{% endblock %}
